// Подключаем библиотеку SFML для работы с графикой (Graphics.hpp содержит классы для рисования)
#include <SFML/Graphics.hpp>

// Главная функция программы - точка входа
int main()
{
    // Создаем окно размером 200x500 пикселей для отображения светофора
    // sf::RenderWindow - класс для создания и управления окном
    // sf::VideoMode({200, 500}) - задает размер окна: ширина 200, высота 500
    // "Traffic Light" - заголовок окна
    sf::RenderWindow window(sf::VideoMode({200, 500}), "Traffic Light");
    
    // === СОЗДАНИЕ КОРПУСА СВЕТОФОРА ===
    // Создаем прямоугольник для корпуса светофора
    // sf::RectangleShape - класс для рисования прямоугольников
    // sf::Vector2f(180, 480) - размер прямоугольника: ширина 180, высота 480 пикселей
    sf::RectangleShape body(sf::Vector2f(180, 480));
    // Устанавливаем позицию корпуса: отступ 10 пикселей слева и сверху
    // setPosition({x, y}) - устанавливает координаты левого верхнего угла фигуры
    body.setPosition({10, 10});
    // Устанавливаем цвет заливки корпуса - темно-серый (RGB: 60, 60, 60)
    // sf::Color(60, 60, 60) - создает цвет с указанными компонентами RGB
    body.setFillColor(sf::Color(60, 60, 60)); // Темно-серый
    
    // === СОЗДАНИЕ КРАСНОГО СВЕТА (верхний) ===
    // Создаем круг для красного сигнала светофора
    // sf::CircleShape(60) - создает круг с радиусом 60 пикселей
    sf::CircleShape redLight(60);
    // Устанавливаем позицию красного круга
    // Центр корпуса по X: 10 + 180/2 = 100
    // Позиция круга: центр - радиус = 100 - 60 = 40
    // По Y: отступ 30 пикселей от верха (10 + 20)
    redLight.setPosition({40, 30});
    // Устанавливаем цвет заливки - красный (предопределенный цвет SFML)
    // sf::Color::Red - встроенная константа для красного цвета
    redLight.setFillColor(sf::Color::Red);
    
    // === СОЗДАНИЕ ЖЕЛТОГО СВЕТА (средний) ===
    // Создаем круг для желтого сигнала светофора с радиусом 60 пикселей
    sf::CircleShape yellowLight(60);
    // Устанавливаем позицию желтого круга: X=40 (центрирован), Y=170 (средняя позиция)
    yellowLight.setPosition({40, 170});
    // Устанавливаем цвет заливки - желтый (предопределенный цвет SFML)
    yellowLight.setFillColor(sf::Color::Yellow);
    
    // === СОЗДАНИЕ ЗЕЛЕНОГО СВЕТА (нижний) ===
    // Создаем круг для зеленого сигнала светофора с радиусом 60 пикселей
    sf::CircleShape greenLight(60);
    // Устанавливаем позицию зеленого круга: X=40 (центрирован), Y=310 (нижняя позиция)
    greenLight.setPosition({40, 310});
    // Устанавливаем цвет заливки - зеленый (предопределенный цвет SFML)
    greenLight.setFillColor(sf::Color::Green);
    
    // === ОСНОВНОЙ ЦИКЛ ПРОГРАММЫ ===
    // Цикл работает, пока окно открыто (пока пользователь не закроет окно)
    // window.isOpen() - возвращает true, если окно открыто
    while (window.isOpen())
    {
        // === ОБРАБОТКА СОБЫТИЙ ===
        // Цикл обработки всех событий окна (нажатия клавиш, закрытие и т.д.)
        // window.pollEvent() - извлекает событие из очереди событий (SFML 3 API)
        // auto event - автоматическое определение типа (std::optional<sf::Event>)
        while (auto event = window.pollEvent())
        {
            // Проверяем, является ли событие закрытием окна
            // event->is<sf::Event::Closed>() - проверяет тип события (SFML 3 API)
            if (event->is<sf::Event::Closed>())
                // Закрываем окно, если пользователь нажал на крестик
                window.close();
        }
        
        // Очищаем окно белым цветом перед отрисовкой нового кадра
        // window.clear() - заполняет все окно указанным цветом
        // sf::Color::White - белый цвет (предопределенная константа)
        window.clear(sf::Color::White);
        // Рисуем корпус светофора на окне
        // window.draw() - добавляет фигуру в буфер отрисовки
        window.draw(body);
        // Рисуем красный свет на окне
        window.draw(redLight);
        // Рисуем желтый свет на окне
        window.draw(yellowLight);
        // Рисуем зеленый свет на окне
        window.draw(greenLight);
        // Отображаем все нарисованное на экране
        // window.display() - выводит содержимое буфера на экран
        window.display();
    }
    
    // Возвращаем 0 - код успешного завершения программы
    return 0;
}
