// Подключаем библиотеку SFML для работы с графикой
#include <SFML/Graphics.hpp>

// Главная функция программы - точка входа
int main()
{
    // Создаем окно размером 600x500 пикселей для отображения домика
    // sf::RenderWindow - класс для создания и управления окном
    // sf::VideoMode({600, 500}) - задает размер окна: ширина 600, высота 500
    // "House" - заголовок окна
    sf::RenderWindow window(sf::VideoMode({600, 500}), "House");
    
    // === ОСНОВАНИЕ ДОМА (темно-коричневый прямоугольник) ===
    // Создаем прямоугольник для основного корпуса домика
    // sf::RectangleShape - класс для рисования прямоугольников
    // sf::Vector2f(320, 240) - размер: ширина 320, высота 240 пикселей
    sf::RectangleShape houseBody(sf::Vector2f(320, 240));
    // Устанавливаем позицию корпуса домика
    // setPosition({x, y}) - устанавливает координаты левого верхнего угла
    // X=140, Y=220 - позиция корпуса на окне
    houseBody.setPosition({140, 220});
    // Устанавливаем цвет заливки - темно-коричневый
    // sf::Color(101, 67, 33) - создает цвет с компонентами RGB (красный, зеленый, синий)
    houseBody.setFillColor(sf::Color(101, 67, 33)); // Темно-коричневый
    
    // === КРЫША (треугольник из ConvexShape) ===
    // Создаем треугольную крышу с помощью выпуклого многоугольника
    // sf::ConvexShape - класс для рисования выпуклых многоугольников
    sf::ConvexShape roof;
    // Устанавливаем количество вершин треугольника (3 точки)
    roof.setPointCount(3);
    // Устанавливаем координаты вершин треугольника (против часовой стрелки)
    // Точка 0: левый нижний угол крыши (совпадает с левым верхним углом корпуса)
    roof.setPoint(0, sf::Vector2f(140, 220));  // Левый нижний угол
    // Точка 1: верхняя точка (вершина крыши, центр по горизонтали)
    // X=300 (центр окна), Y=120 (высоко над корпусом)
    roof.setPoint(1, sf::Vector2f(300, 120));  // Верхняя точка (центр крыши)
    // Точка 2: правый нижний угол крыши (совпадает с правым верхним углом корпуса)
    // X=460 (140 + 320), Y=220 (на уровне верха корпуса)
    roof.setPoint(2, sf::Vector2f(460, 220));  // Правый нижний угол
    // Устанавливаем цвет заливки - темно-красновато-коричневый
    // sf::Color(139, 69, 19) - цвет для крыши (более темный оттенок)
    roof.setFillColor(sf::Color(139, 69, 19)); // Темно-красновато-коричневый
    
    // === ДВЕРЬ (темно-серый прямоугольник) ===
    // Создаем прямоугольник для двери домика
    // Размер: ширина 50, высота 100 пикселей
    sf::RectangleShape door(sf::Vector2f(50, 100));
    // Устанавливаем позицию двери
    // X=160 (с небольшим отступом от левого края корпуса), Y=360 (внизу корпуса)
    door.setPosition({160, 360});
    // Устанавливаем цвет заливки - темно-серый
    // sf::Color(50, 50, 50) - темно-серый цвет (низкая яркость всех компонентов)
    door.setFillColor(sf::Color(50, 50, 50)); // Темно-серый
    
    // === ТРУБА (темно-серый прямоугольник) ===
    // Создаем прямоугольник для трубы на крыше
    // Размер: ширина 35, высота 70 пикселей
    sf::RectangleShape chimney(sf::Vector2f(35, 70));
    // Устанавливаем позицию трубы
    // X=400 (на правой части крыши), Y=150 (выступает над крышей)
    chimney.setPosition({400, 150});
    // Устанавливаем цвет заливки - темно-серый (как у двери)
    chimney.setFillColor(sf::Color(50, 50, 50)); // Темно-серый
    
    // === ДЫМ ИЗ ТРУБЫ (круги) ===
    // Дым создается из нескольких кругов разного размера,
    // расположенных друг над другом для создания эффекта поднимающегося дыма
    
    // Первый круг дыма (маленький, ближе к трубе)
    // sf::CircleShape(12) - создает круг с радиусом 12 пикселей
    sf::CircleShape smoke1(12);
    // Устанавливаем позицию первого круга дыма
    // X=408 (над центром трубы), Y=130 (чуть выше трубы)
    smoke1.setPosition({408, 130});
    // Устанавливаем цвет заливки - светло-серый (самый светлый дым)
    // sf::Color(220, 220, 220) - светло-серый цвет (высокая яркость)
    smoke1.setFillColor(sf::Color(220, 220, 220)); // Светло-серый
    
    // Второй круг дыма (средний размер)
    // Радиус 18 пикселей (больше первого)
    sf::CircleShape smoke2(18);
    // Позиция: X=415 (смещен вправо), Y=105 (выше первого)
    smoke2.setPosition({415, 105});
    // Цвет немного темнее первого (имитация рассеивания дыма)
    smoke2.setFillColor(sf::Color(200, 200, 200));
    
    // Третий круг дыма (большой)
    // Радиус 22 пикселя (самый большой)
    sf::CircleShape smoke3(22);
    // Позиция: X=422 (еще правее), Y=75 (еще выше)
    smoke3.setPosition({422, 75});
    // Цвет еще темнее (дым продолжает рассеиваться)
    smoke3.setFillColor(sf::Color(180, 180, 180));
    
    // Четвертый круг дыма (еще больше, выше)
    // Радиус 18 пикселей (меньше третьего, но выше)
    sf::CircleShape smoke4(18);
    // Позиция: X=430 (еще правее), Y=50 (еще выше)
    smoke4.setPosition({430, 50});
    // Цвет еще темнее (дым сильно рассеивается)
    smoke4.setFillColor(sf::Color(160, 160, 160));
    
    // Пятый круг дыма (самый верхний)
    // Радиус 15 пикселей (меньше четвертого)
    sf::CircleShape smoke5(15);
    // Позиция: X=438 (максимально вправо), Y=30 (самый верхний)
    smoke5.setPosition({438, 30});
    // Цвет самый темный (дым почти исчез)
    smoke5.setFillColor(sf::Color(140, 140, 140));
    
    // === ОСНОВНОЙ ЦИКЛ ПРОГРАММЫ ===
    // Цикл работает, пока окно открыто (пока пользователь не закроет окно)
    // window.isOpen() - возвращает true, если окно открыто
    while (window.isOpen())
    {
        // === ОБРАБОТКА СОБЫТИЙ ===
        // Цикл обработки всех событий окна (нажатия клавиш, закрытие и т.д.)
        // window.pollEvent() - извлекает событие из очереди событий (SFML 3 API)
        // auto event - автоматическое определение типа (std::optional<sf::Event>)
        while (auto event = window.pollEvent())
        {
            // Проверяем, является ли событие закрытием окна
            // event->is<sf::Event::Closed>() - проверяет тип события (SFML 3 API)
            if (event->is<sf::Event::Closed>())
                // Закрываем окно, если пользователь нажал на крестик
                window.close();
        }
        
        // Очищаем окно белым цветом перед отрисовкой нового кадра
        // window.clear() - заполняет все окно указанным цветом
        // sf::Color::White - белый цвет (предопределенная константа)
        window.clear(sf::Color::White);
        
        // === ОТРИСОВКА ДОМИКА ===
        // Рисуем элементы домика в правильном порядке (сначала задние, потом передние)
        // window.draw() - добавляет фигуру в буфер отрисовки
        
        // Рисуем корпус домика (основание)
        window.draw(houseBody);
        // Рисуем крышу (поверх корпуса)
        window.draw(roof);
        // Рисуем дверь (поверх корпуса)
        window.draw(door);
        // Рисуем трубу (поверх крыши)
        window.draw(chimney);
        
        // === ОТРИСОВКА ДЫМА ===
        // Рисуем дым снизу вверх (от трубы к небу)
        // Порядок важен для правильного наложения кругов
        window.draw(smoke1); // Первый круг (нижний, ближе к трубе)
        window.draw(smoke2); // Второй круг
        window.draw(smoke3); // Третий круг (самый большой)
        window.draw(smoke4); // Четвертый круг
        window.draw(smoke5); // Пятый круг (верхний, самый далекий)
        
        // Отображаем все нарисованное на экране
        // window.display() - выводит содержимое буфера на экран
        window.display();
    }
    
    // Возвращаем 0 - код успешного завершения программы
    return 0;
}
